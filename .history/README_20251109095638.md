üçå Banana Blockchain: Transparent Supply Chain LedgerProject OverviewThe Banana Blockchain is a transparent, immutable ledger system designed to track produce (specifically bananas, but adaptable to any perishable goods) from the farm to the retailer. By recording every transfer and storage event on an append-only, cryptographically secured digital chain, we restore trust and accountability in the agricultural supply chain.The Problem SpaceToday's food supply chains are fragmented, leading to two major issues:Lack of Trust and Traceability: When a product recall occurs or quality issues arise (like bruising or temperature fluctuations), tracing the exact point of failure is slow, costly, and often impossible. Consumers often demand more information about the origins of their food.Data Volatility (The "Etch A Sketch" Server Problem): Traditional solutions often rely on local databases, meaning data is easily lost, corrupted, or cannot be shared between different participants (farm, truck, warehouse).The Solution: An Immutable, Stateless LedgerThe Banana Blockchain solves this by implementing a cryptographic ledger backed by a persistent cloud database (Firebase), ensuring data is both tamper-proof and accessible to all authorized parties instantly.Immutable Ledger: Every action (Harvest, Transfer, Store) creates a new Ledger Block that is mathematically linked to the previous one via a SHA-256 hash. If any single piece of data is changed, the entire chain is invalidated, instantly flagging tampering.Decentralized Data: By using Firebase Firestore, the ledger is stored off-server, meaning the data persists even if the server restarts (solving the "Etch A Sketch" problem).Crate-Level Granularity: Batches are broken down by individual crate, allowing for precise tracking and auditing of small units, not just large lots.Technical Features & AuditBlockchain Integrity & Audit LogicThe system provides two critical audit features via the /api/batch/<id>/audit endpoint:Chain Confirmation (confirm_chain):Logic: Re-calculates the hash of every single block in the ledger, from the Genesis Block to the final block.Result: Verifies that Block N's saved hash matches the recalculated hash and that Block N's previous_hash matches the saved hash of Block N-1. If this fails, the chain has been TAMPERED.Haversine Geo-Auditing (haversine_audit_logic):Logic: Calculates the distance and time elapsed between consecutive GPS coordinates for every transfer in the chain.Result: Flags a WARNING if the implied speed between two locations exceeds a reasonable threshold (e.g., 1000 km/h), indicating a potentially fraudulent GPS entry.Deployment & Frontend/Backend StackLayerTechnologyPurposeFrontend (F)React (JSX)User Interface, Location services, Base64 PDF Download.Backend (B)Python, Flask, GunicornAPI Layer, Hashing, Business Logic, CORS.Database (D)Firebase FirestorePersistent, Cloud-Hosted ledger storage (NoSQL).File HandlingBase64 Encoding, FPDFIn-Memory PDF Streaming (solves the "files disappearing" problem).üöÄ Running the ProjectTo run this project locally or deploy it successfully, you need the following configuration steps:1. Backend DependenciesEnsure your Python environment has all required libraries.# Install all required Python packages
pip install -r requirements.txt

# File contents: flask, flask-cors, firebase-admin, haversine, 
# qrcode, reportlab, Pillow, gunicorn, etc.
2. Firebase & Secret Setup (CRITICAL)The application requires secure access to your Firebase project (for both Firestore ledger read/write).Generate Service Account Key: In your Firebase Console, go to Project Settings -> Service Accounts -> Generate new private key.Rename/Save: Save the downloaded JSON file as serviceAccountKey.json in your backend's main directory.Secure Deployment (Render): DO NOT PUSH THIS FILE TO GITHUB. Instead, copy the entire JSON content and paste it into a "Secret File" named serviceAccountKey.json in your Render backend service's Environment settings.3. Running the Backend (B)The Gunicorn web server is used for production-ready deployment:# In production (Render)
gunicorn app:app

# In local development
flask run --port 5000 
4. Running the Frontend (F)Your React frontend runs on a local web server (usually via Vite).# In your frontend directory
npm install
npm run dev
(Note: Your frontend is configured to run on http://localhost:5174 during development.)5. API EndpointsEndpointMethodFunction/api/batchPOSTCreates a new batch document in Firestore, generates the Genesis Block, and returns Base64 PDF data./api/transferPOSTAdds a new event (Transfer/Store) to the existing batch ledger using ArrayUnion./api/batch/<id>/auditGETRuns cryptographic chain verification and Haversine geo-auditing./api/batch/<id>GETRetrieves the full historical ledger for a batch./api/batch/hackPOSTDemonstrates tampering by modifying the Genesis Block's actor name.